@using Microsoft.AspNetCore.Components
@using MockServer.Web.Models.ProjectRequests
@using Services.Interfaces

<partial name="/Views/ProjectShared/_Breadcrumb.cshtml" model="Model.Project" />
<div style="height: calc(100vh - 180px);">
    <partial name="/Views/ProjectShared/_NavTabs.cshtml" model="Model.Project" />
    <div class="tab-content h-100">
        <div class="tab-pane fade show active h-100">
            <div class="row h-100 p-2">
                <div class="col-3 h-100 overflow-scroll">
                    <div class="d-grid mt-1">
                        <button class="btn btn-sm bg-violet-500 text-white js-new-request-button">New</button>
                    </div>
                    <div class="request-container">
                        <ul id="requests" class="list-group list-group-flush mt-2">
                            @foreach (var req in Model.Requests)
                            {
                                <li class="request-list-item list-group-item px-2 py-1">
                                    <div class="row">
                                        <div class="col" @onclick="async() => await Display(req.Id)">
                                            <span class="tw-text-base">@req.Name</span>
                                            <div>
                                                <small
                                                class="badge rounded-pill fw-bolder text-white me-1 @req.MethodBadgeColor"
                                                style="width: 60px; font-size: 11px;">@req.Method</small>
                                                <small class="text-muted">/@req.Path</small>
                                            </div>
                                        </div>
                                        <div class="p-0 my-auto" style="width: 40px;">
                                            <button class="btn btn-sm btn-context-menu" type="button"><i
                                                class="bi bi-three-dots"></i></button>
                                        </div>
                                    </div>
                                </li>
                            }
                        </ul>
                    </div>
                </div>
                <div class="col-9 h-100" id="RequestOpenContent">
                    @if (DisplayingRequest != null)
                    {
                        <div class="row h-100">
                        <div class="col-9 h-100 overflow-scroll">
                        <div>
                        <div class="card">
                            <div class="card-header d-flex">
                                Overview
                                <button class="btn btn-light btn-sm py-1 ms-auto my-0 js-basic-edit-button">Edit</button>
                            </div>
                <div class="card-body">
                    <div class="d-flex mb-1">
                        <strong class="fw-bolder">@DisplayingRequest.Name</strong>
                    </div>
                    <div class="mb-2">
                            <small>@DisplayingRequest.Description</small>
                    </div>
                    <div class="mb-2">
                            <strong class="me-2 @DisplayingRequest.MethodTextColor" id="method">@DisplayingRequest.Method</strong>
                            <span id="path">@DisplayingRequest.Path</span>
                    </div>
                    <div class="input-group mb-3">
                            <input id="privateKey" type="text" class="form-control" value="@DisplayingRequest.Url" readonly>
                        <button id="btnCopyPrivateKeyToClipboard" type="button" class="input-group-text">
                            <i class="bi bi-clipboard">
                            </i></button>
                    </div>
                </div>
            </div>
            <div class="card mt-1">
                <div class="card-header d-flex">
                    Authorization
                    <button class="btn btn-light btn-sm py-1 ms-auto my-0 js-config-auth">Configure</button>
                </div>
                <div class="card-body">
                    @if (DisplayingRequest.AuthorizationConfiguration != null)
                    {
                        <table class="table table-borderless">
                            <thead>
                                <tr>
                                    <th scope="col">Authorization Type</th>
                                    <th scope="col">Authentication Schemes</th>
                                    <th scope="col">Policies</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td scope="row">@DisplayingRequest.AuthorizationConfiguration.Type</td>
                                            <td>@DisplayingRequest.AuthorizationConfiguration.AuthenticationSchemes.Count</td>
                                            <td>@DisplayingRequest.AuthorizationConfiguration.Policies.Count</td>
                                </tr>
                            </tbody>
                        </table>
                    }
                    else
                    {
                        <p>No authorization attached to this request.</p>
                    }
                </div>
            </div>
        </div>
        @* <div id="request-config">
            <style type="text/css" media="screen">
                #request-body-editor,
                #response-body-editor,
                #response-body-render-script {
                    position: absolute;
                    top: 0;
                    right: 0;
                    bottom: 0;
                    left: 0;
                }
            </style>
            <div>
                <div class="card mt-1">
                    <div class="card-header d-flex">
                        Request Configuration
                        <button id="btnSave" class="btn btn-light btn-sm py-1 ms-auto my-0">Save</button>
                    </div>
                    <div class="card-body">
                        <ul class="nav nav-tabs" role="tablist">
                            <li class="nav-item" role="presentation">
                                <button type="button" class="nav-link active py-1" data-bs-toggle="tab"
                                    data-bs-target="#request-param-tab">Params</button>
                            </li>
                            <li class="nav-item">
                                <button type="button" class="nav-link py-1" data-bs-toggle="tab"
                                    data-bs-target="#request-header-tab">Headers</button>
                            </li>
                            <li class="nav-item">
                                <button type="button" class="nav-link py-1" data-bs-toggle="tab"
                                    data-bs-target="#request-body-tab">Body</button>
                            </li>
                        </ul>
                        <div class="tab-content" style="min-height: 200px;">
                            <div id="request-param-tab" class="tab-pane fade show active p-2" role="tabpanel">
                                <table id="request-params" class="table table-sm p-0 m-0">
                                    <thead>
                                        <tr>
                                            <th style="width: 35%" scope="col">Key</th>
                                            <th style="width: 35%" scope="col">Value</th>
                                            <th style="width: 10%" scope="col">Constraints</th>
                                            <th style="width: 10%" scope="col"></th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        @{
                                            DisplayingRequest.RequestConfiguration.Query.Add(new());
                                        }
                                        @for (int i = 0; i < DisplayingRequest.RequestConfiguration.Query.Count; i++)
                                        {
                                            <tr>
                                                <td class="align-middle"><input asp-for="RequestConfiguration.Query[i].Key"
                                                    type="text" class="form-control form-control-sm param-key"
                                                    placeholder="key" autocomplete="off">
                                                </td>
                                                <td class="align-middle"><input type="text"
                                                    class="form-control form-control-sm param-value"
                                                    asp-for="RequestConfiguration.Query[i].Value" placeholder="value"
                                                    autocomplete="off">
                                                </td>
                                                <td class="align-middle">
                                                    <div>
                                                        <input type="hidden"
                                                        asp-for="RequestConfiguration.Query[i].Constraints">
                                                        <span
                                                        name="ConstraintsCount">@DisplayingRequest.RequestConfiguration.Query[i].ConstraintsCount</span>
                                                        <button class="ms-2 js-config-param-constraints"><i
                                                            class="bi bi-box-arrow-in-up-right"></i></button>
                                                    </div>
                                                </td>
                                                <td class="align-middle"><button
                                                    class="btn param-delete text-gray btn-show-on-hover"><i
                                                        class="bi bi-trash"></i></button>
                                                </td>
                                            </tr>
                                        }
                                    </tbody>
                                </table>
                            </div>
                            <div id="request-header-tab" class="tab-pane fade p-2" role="tabpanel">
                                <table id="request-header-table" class="table table-sm p-0 m-0">
                                    <thead>
                                        <tr>
                                            <th style="width: 35%" scope="col">Header</th>
                                            <th style="width: 35%" scope="col">Value</th>
                                            <th style="width: 10%" scope="col">Constraints</th>
                                            <th style="width: 10%" scope="col"></th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        @{
                                            DisplayingRequest.RequestConfiguration.Headers.Add(new());
                                        }
                                        @for (int i = 0; i < DisplayingRequest.RequestConfiguration.Headers.Count; i++)
                                        {
                                            <tr>
                                                <td class="align-middle"><input type="text"
                                                    class="form-control form-control-sm"
                                                    asp-for="RequestConfiguration.Headers[i].Name" placeholder="name">
                                                </td>
                                                <td class="align-middle"><input type="text"
                                                    class="form-control form-control-sm"
                                                    asp-for="RequestConfiguration.Headers[i].Value" placeholder="value">
                                                </td>
                                                <td class="align-middle"><input type="hidden"
                                                    asp-for="RequestConfiguration.Headers[i].Constraints">
                                                </td>
                                                <td class="align-middle"><button
                                                    class="btn header-delete text-gray btn-show-on-hover"><i
                                                        class="bi bi-trash"></i></button>
                                                </td>
                                            </tr>
                                        }
                                    </tbody>
                                </table>
                            </div>
                            <div id="request-body-tab" class="tab-pane fade p-2" role="tabpanel">
                                <div class="px-2 mt-1">
                                    <div class="d-flex input-group mb-2">
                                        <div class="form-check me-5">
                                            <input class="form-check-input" type="checkbox"
                                                checked="@(DisplayingRequest.RequestConfiguration.Body.Constraints.Contains("Required", StringComparison.OrdinalIgnoreCase))">
                                            <label class="form-check-label"></label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox"
                                                checked="@(DisplayingRequest.RequestConfiguration.Body.Constraints.Contains("MatchExactly", StringComparison.OrdinalIgnoreCase))">
                                            <label class="form-check-label">Match Exactly</label>
                                        </div>
                                        <input type="hidden" asp-for="RequestConfiguration.Body.Constraints"
                                            value="RequestConfiguration.Body.Constraints">
                                    </div>
                                    <div>
                                        <div class="d-flex">
                                            <select id="request-body-type"
                                                class="form-select form-select-sm w-auto mb-1">
                                                <option value="json" selected>JSON</option>
                                                <option value="xml">XML</option>
                                                <option value="text">Text</option>
                                            </select>
                                            <div class="ms-auto">
                                                <button class="btn btn-sm btn-link text-decoration-none">Format</button>
                                            </div>
                                        </div>
                                        <div class="position-relative" style="min-height: 200px;">
                                            <textarea asp-for="RequestConfiguration.Body.Text"></textarea>
                                            <div id="request-body-editor"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div>
                <div class="card mt-1">
                    <div class="card-header d-flex">
                        Script
                        <button id="btnSave" class="btn btn-light btn-sm py-1 ms-auto my-0">Save</button>
                    </div>
                    <div class="card-body">
                        <div class="position-relative" style="min-height: 200px;">
                            <textarea asp-for="HandlerConfiguration.Script"></textarea>
                            <div id="response-body-render-script"></div>
                        </div>
                    </div>
                </div>
            </div>
            <div>
                <div class="card mt-1">
                    <div class="card-header">
                        Response Configuration
                    </div>
                    <div class="card-body">
                        <ul class="nav nav-tabs" role="tablist">
                            <li class="nav-item" role="presentation">
                                <button type="button" class="nav-link active py-1" data-bs-toggle="tab"
                                    data-bs-target="#response-basic-tab">Basic</button>
                            </li>
                            <li class="nav-item">
                                <button type="button" class="nav-link py-1" data-bs-toggle="tab"
                                    data-bs-target="#response-body-tab">Body</button>
                            </li>
                            <li class="nav-item" role="presentation">
                                <button type="button" class="nav-link py-1" data-bs-toggle="tab"
                                    data-bs-target="#response-header-tab">Headers</button>
                            </li>
                        </ul>
                        <div class="tab-content" style="min-height: 200px;">
                            <div id="response-basic-tab" class="tab-pane fade show active p-2" role="tabpanel">
                                <div class="mb-3 col-sm-2">
                                    <label class="form-label">Status code</label>
                                    <input type="text" list="commonStatusCodes" class="form-control form-control-sm"
                                        asp-for="ResponseConfiguration.StatusCode" />
                                    <datalist id="commonStatusCodes">
                                        @foreach (var item in DisplayingRequest.StatusCodeSelectListItem)
                                        {
                                            <option value="@Convert.ToInt32(item.Value)">@item.Text</option>
                                        }
                                    </datalist>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Delay</label>
                                    <div class="d-flex">
                                        <div class="my-auto me-2">
                                            <input class="form-check-input" type="checkbox"
                                                asp-for="ResponseConfiguration.Delay"
                                                checked="@DisplayingRequest.ResponseConfiguration?.Delay">
                                        </div>
                                        <div class="col-2 me-1">
                                            <input type="number" class="form-control form-control-sm" min="0"
                                                max="10000" asp-for="ResponseConfiguration.DelayTime">
                                        </div>
                                        <div class="my-auto">
                                            <label>miliseconds</label>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div id="response-body-tab" class="tab-pane fade p-2" role="tabpanel">
                                <div>
                                    <div class="d-flex">
                                        <select id="response-body-type" class="form-select form-select-sm w-auto mb-1">
                                            <option value="json" selected>JSON</option>
                                            <option value="xml">XML</option>
                                            <option value="text">Text</option>
                                        </select>
                                        <select class="form-select form-select-sm w-auto mb-1"
                                            asp-for="ResponseConfiguration.BodyRenderType">
                                            <option value="1">Static</option>
                                            <option value="2">Handlebars</option>
                                            <option value="3">Expression with script</option>
                                        </select>
                                        <div class="ms-auto">
                                            <button class="btn btn-sm btn-link text-decoration-none">Format</button>
                                        </div>
                                    </div>
                                    <div class="position-relative" style="min-height: 200px;">
                                        <textarea asp-for="ResponseConfiguration.BodyText"></textarea>
                                        <div id="response-body-editor"></div>
                                    </div>
                                </div>
                            </div>
                            <div id="response-header-tab" class="tab-pane fade p-2" role="tabpanel">
                                <table id="response-header-table" class="table table-sm p-0 m-0">
                                    <thead>
                                        <tr>
                                            <th style="width: 35%" scope="col">Name</th>
                                            <th style="width: 55%" scope="col">Value</th>
                                            <th style="width: 10%" scope="col"></th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        @{
                                            DisplayingRequest.ResponseConfiguration.Headers.Add(new());
                                        }
                                        @for (int i = 0; i < DisplayingRequest.ResponseConfiguration.Headers.Count; i++)
                                        {
                                            <tr>
                                                <td class="align-middle"><input
                                                    asp-for="ResponseConfiguration.Headers[i].Name" type="text"
                                                    class="form-control form-control-sm header-name" placeholder="name"
                                                    autocomplete="off">
                                                </td>
                                                <td class="align-middle">
                                                    <input type="text" class="form-control form-control-sm header-value"
                                                    asp-for="ResponseConfiguration.Headers[i].Value"
                                                    placeholder="value">
                                                </td>
                                                <td class="align-middle"><button
                                                    class="btn header-delete text-gray btn-show-on-hover"><i
                                                        class="bi bi-trash"></i></button>
                                                </td>
                                            </tr>
                                        }
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <template id="requestParamRow">
                <tr>
                    <td class="align-middle"><input type="text" name="key"
                            class="form-control form-control-sm param-key" placeholder="key">
                    </td>
                    <td class="align-middle"><input type="text" name="value"
                            class="form-control form-control-sm param-value" placeholder="value">
                    </td>
                    <td class="align-middle">
                        <div>
                            <input type="hidden">
                            <span name="ConstraintsCount">0</span>
                            <button class="ms-2 js-config-param-constraints"><i
                                    class="bi bi-box-arrow-in-up-right"></i></button>
                        </div>
                    </td>
                    <td class="align-middle"><button class="btn text-gray btn-show-on-hover param-delete"><i
                                class="bi bi-trash"></i></button>
                    </td>
                </tr>
            </template>
            <template id="requestHeaderRow">
                <tr>
                    <td class="align-middle"><input type="text" name="name"
                            class="form-control form-control-sm header-name" placeholder="name">
                    </td>
                    <td class="align-middle"><input type="text" name="value"
                            class="form-control form-control-sm header-value" placeholder="value">
                    </td>
                    <td class="align-middle"><input type="checkbox" name="required"
                            class="form-check-input header-required">
                    </td>
                    <td class="align-middle"><input type="checkbox" name="matchExactly"
                            class="form-check-input header-match-exactly">
                    </td>
                    <td class="align-middle"><button class="btn text-gray btn-show-on-hover header-delete"><i
                                class="bi bi-trash"></i></button>
                    </td>
                </tr>
            </template>
            <template id="responseHeaderRow">
                <tr>
                    <td class="align-middle">
                        <input type="text" name="name" class="form-control form-control-sm header-name"
                            placeholder="name">
                    </td>
                    <td class="align-middle">
                        <input type="text" name="value" class="form-control form-control-sm header-value"
                            placeholder="value">
                    </td>
                    <td class="align-middle">
                        <button class="btn text-gray btn-show-on-hover header-delete"><i
                                class="bi bi-trash"></i></button>
                    </td>
                </tr>
            </template>
            <template id="requestParamConstraintsConfig">
                <div class="modal fade">
                    <div class="modal-dialog modal-lg">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title" id="exampleModalLabel">Constraints</h5>
                                <button type="button" class="btn-close" data-bs-dismiss="modal"
                                    aria-label="Close"></button>
                            </div>
                            <div class="modal-body">
                                <div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" name="required" />
                                        <label class="form-check-label">Required</label>
                                    </div>
                                    <div class="form-text">Used to enforce that a non-parameter value is present
                                    </div>
                                </div>
                                <hr />
                                <div>
                                    <div class="d-flex">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" name="type" />
                                            <label class="form-check-label">Type</label>
                                        </div>
                                        <select class="ms-auto form-select form-select-sm" style="width: 100px;"
                                            name="type">
                                            <option value="int">Int</option>
                                            <option value="bool">Boolean</option>
                                            <option value="datetime">Datetime</option>
                                            <option value="decimal">Decimal</option>
                                            <option value="double">Double</option>
                                            <option value="float">Float</option>
                                            <option value="guid">GUID</option>
                                            <option value="long">Long</option>
                                        </select>
                                    </div>
                                    <p class="form-text">Used to enforce that a non-parameter value is present</p>
                                </div>
                                <hr />
                                <div>
                                    <div class="d-flex">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" name="minlength" />
                                            <label class="form-check-label">Minimum Length</label>
                                        </div>
                                        <input class="ms-auto form-control form-control-sm" style="width: 100px;"
                                            type="number" name="minlength" />
                                    </div>
                                    <p class="form-text">Used to enforce that a non-parameter value is present</p>
                                </div>
                                <hr />
                                <div>
                                    <div class="d-flex">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" name="maxlength" />
                                            <label class="form-check-label">Maximum Length</label>
                                        </div>
                                        <input class="ms-auto form-control form-control-sm" style="width: 100px;"
                                            type="number" name="maxlength" />
                                    </div>
                                    <p class="form-text">Used to enforce that a non-parameter value is present</p>
                                </div>
                                <hr />
                                <div>
                                    <div class="d-flex">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" name="length" />
                                            <label class="form-check-label">Length</label>
                                        </div>
                                        <input class="ms-auto form-control form-control-sm" style="width: 100px;"
                                            type="number" name="length" />
                                    </div>
                                    <p class="form-text">Constrains value to be a string of a given length or within
                                        a given range
                                        of lengths.</p>
                                </div>
                                <hr />
                                <div>
                                    <div class="d-flex">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" name="min" />
                                            <label class="form-check-label">Min</label>
                                        </div>
                                        <input class="ms-auto form-control form-control-sm" style="width: 100px;"
                                            type="number" name="min" />
                                    </div>
                                    <p class="form-text">Constrains a route parameter to be a long with a minimum
                                        value.</p>
                                </div>
                                <hr />
                                <div>
                                    <div class="d-flex">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" name="max" />
                                            <label class="form-check-label">Max</label>
                                        </div>
                                        <input class="ms-auto form-control form-control-sm" style="width: 100px;"
                                            type="number" name="max" />
                                    </div>
                                    <p class="form-text">Constrains a route parameter to be an integer with a
                                        maximum value.</p>
                                </div>
                                <hr />
                                <div>
                                    <div class="d-flex">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" name="range" />
                                            <label class="form-check-label">Range</label>
                                        </div>
                                        <div class="ms-auto d-flex">
                                            <input class="form-control form-control-sm" style="width: 100px;"
                                                type="number" name="range-min" />
                                            <label class="form-label mx-2">~</label>
                                            <input class="form-control form-control-sm" style="width: 100px;"
                                                type="number" name="range-max" />
                                        </div>
                                    </div>
                                    <p class="form-text">Constraints a route parameter to be an integer within a
                                        given range of
                                        values.</p>
                                </div>
                                <hr />
                                <div>
                                    <div class="d-flex">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" name="alpha" />
                                            <label class="form-check-label">Alpha</label>
                                        </div>
                                    </div>
                                    <p class="form-text">Constraints a route parameter to be an integer within a
                                        given range of
                                        values.</p>
                                </div>
                                <hr />
                                <div>
                                    <div class="d-flex">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" name="regex" />
                                            <label class="form-check-label">Regex</label>
                                        </div>
                                        <input class="ms-auto form-control form-control-sm w-50" type="text"
                                            name="expression" />
                                    </div>
                                    <p class="form-text">Constraints a route parameter to be an integer within a
                                        given range of
                                        values.</p>
                                </div>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                                <button type="button" class="btn btn-primary js-save">Save</button>
                            </div>
                        </div>
                    </div>
                </div>
            </template>
        </div> *@
    </div>
    <div id="request-log" class="col-3 h-100 overflow-scroll">
        <p>Log</p>
    </div>
</div>
        }
                </div>
            </div>
            <style>
                .context-menu {
                    position: absolute;
                    width: 60px;
                }
            </style>
            <template id="context-menu-template">
                <div class="btn-group-vertical dropdown-menu context-menu" role="group">
                    <button name="btnCopy" type="button" class="dropdown-item btn btn-default">Copy</button>
                    <button name="btnDelete" type="button"
                        class="dropdown-item btn btn-default text-danger">Delete</button>
                </div>
            </template>

            <!-- Modal -->
            <template id="requestDeleteConfirmModalTemplate">
                <div class="modal fade" id="requestDeleteConfirmModal" tabindex="-1" aria-labelledby="exampleModalLabel"
                    aria-hidden="true">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title" id="exampleModalLabel">Delete confirm</h5>
                                <button type="button" class="btn-close" data-bs-dismiss="modal"
                                    aria-label="Close"></button>
                            </div>
                            <div class="modal-body">
                                Are your sure want to delete request?
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                                <button name="btnDelete" type="button" class="btn btn-danger">Delete</button>
                            </div>
                        </div>
                    </div>
                </div>
            </template>
        </div>
    </div>
</div>
@code {
    public bool Loading { get; set; }
    [Inject]
    protected IProjectRequestWebService RequestWebService { get; set; }
    protected override void OnInitialized()
    {
        base.OnInitialized();
    }

    protected override Task OnParametersSetAsync()
    {
        return base.OnParametersSetAsync();
    }
    
    public RequestViewModel DisplayingRequest { get; set; }
    public bool ShowSaveRequestModal { get; set; } = false;
    public SaveRequestViewModel SaveRequestModel { get; set; }

    [Parameter]
    public IndexViewModel Model { get; set; }

    private async Task Display(int id)
    {
        DisplayingRequest = await RequestWebService.GetRequestOpenViewModel(id);
    }

    private async Task ShowCreateModal() {
        ShowSaveRequestModal = true;
    }

    private async Task ShowEditModal(int id) {
        SaveRequestModel = await RequestWebService.GetEditRequestViewModel(id);
    }
}

