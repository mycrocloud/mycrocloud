<template id="route-list-template">
    <v-list>
        <v-list-item class="pa-0" v-for="route in routes" :key="route.id">
            <v-card v-on:click="clickRoute(route.id)" :class="{'bg-primary': route.id === clickRouteWebAppId}">
                <v-card-text>{{route.name}}</v-card-text>
                <v-row class="m-0">
                    <v-badge v-for="m of route.matchMethods.slice(0,3)"
                        :content="m"
                        :color="getMethodBadgeColor(m)" text-color="white"
                        inline>
                    </v-badge>
                </v-row>
                <v-card-text>{{route.matchPath}}</v-card-text>
            </v-card>
        </v-list-item>
    </v-list>
</template>
<script>
    const RouteListComponent = {
        template: '#route-list-template',
        props: {
            routes: {
                type: Array,
                required: true
            }
        },
        emits: ['click-route'],
        setup(props, { emit }) {
            const clickRouteWebAppId = ref(null)
            const clickRoute = (id) => {
                clickRouteWebAppId.value = id;
                emit('click-route', id);
            }
            const getMethodBadgeColor = (method) => {
                switch (method) {
                    case 'DELETE': return 'red';
                    case 'POST': return 'orange';
                    case 'PUT': return 'yellow';
                    case 'GET': return 'light-blue';
                    default: return 'light-blue';
                }
            }
            return {
                clickRoute,
                clickRouteWebAppId,
                getMethodBadgeColor,
            }
        }
    }
</script>